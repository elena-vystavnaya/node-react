{"version":3,"sources":["components/Header.js","components/Sider.js","pages/About.js","pages/Home.js","constants/validateMessages.js","components/reusable/FormInput.js","hooks/usePost.js","pages/Profile.js","hooks/useQuery.js","pages/SignUp.js","pages/SignIn.js","components/Page.js","reducers/user.js","reducers/index.js","utils/ErrorBoundary.js","utils/PrivateRoute.js","hooks/useChat.js","hooks/useBeforeUnload.js","App.js","index.js"],"names":["Header","props","history","useHistory","title","theme","onChangeTheme","useState","user","setUser","token","localStorage","getItem","useEffect","a","axios","get","response","data","fetchData","menu","Item","to","UserOutlined","EditOutlined","FileOutlined","Divider","danger","onClick","removeItem","push","LogoutOutlined","checked","onChange","overlay","trigger","e","preventDefault","username","DownOutlined","Sider","routes","defaultSelectedKeys","location","pathname","mode","map","item","path","About","users","gutter","className","index","span","status","isOnline","email","Home","validateMessages","required","types","number","regexp","range","string","min","max","pattern","mismatch","FormInput","label","inputLabel","type","inputType","name","inputName","rules","inputRules","value","inputValue","initialValue","usePost","query","variables","route","post","error","message","console","log","Profile","setDate","loading","setLoading","fetch","useCallback","fetchApi","refetch","useQuery","currentPassword","newPassword","formData","setFormData","postData","OnFinish","success","onChangeField","target","size","icon","Title","level","layout","onFinish","htmlType","SignUp","password","setItem","Password","SignIn","Page","setTitle","document","children","state","action","payload","id","combineReducers","ErrorComponent","ErrorBoundary","hasError","stack","info","componentStack","this","setState","React","Component","PrivateRoute","component","rest","verifyToken","render","useChat","roomId","setUsers","socketRef","useRef","current","io","transports","auth","userId","emit","on","disconnect","handleBeforeunload","returnValue","window","addEventListener","removeEventListener","useBeforeUnload","store","createStore","rootReducer","composeWithDevTools","App","setTheme","dinamicRoutes","exact","staticRoutes","interceptors","request","use","config","headers","Authorization","breakpoint","Content","Footer","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.2a35f618.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Dropdown, Menu, Switch, Button } from \"antd\";\nimport axios from \"axios\";\nimport {\n    DownOutlined,\n    UserOutlined,\n    EditOutlined,\n    FileOutlined,\n    LogoutOutlined,\n} from \"@ant-design/icons\";\n\nconst Header = (props) => {\n    const history = useHistory();\n    const { title, theme, onChangeTheme } = props;\n    const [user, setUser] = useState(null);\n\n    const logOut = () => {\n        localStorage.removeItem(\"token\");\n        setUser(null);\n        history.push(\"/login\");\n    };\n\n    const token = localStorage.getItem(\"token\");\n    useEffect(() => {\n        async function fetchData() {\n            if (token) {\n                const response = await axios.get(\n                    \"http://localhost:8000/api/user\"\n                );\n                if (response.data) {\n                    setUser({\n                        ...response.data,\n                    });\n                }\n            }\n        }\n        fetchData();\n    }, [token]);\n\n    const menu = (\n        <Menu>\n            <Menu.Item key='/profile'>\n                <Link to='/profile'>\n                    <UserOutlined />\n                    Profile\n                </Link>\n            </Menu.Item>\n            <Menu.Item key='/edit-profile'>\n                <Link to='/edit-profile'>\n                    <EditOutlined />\n                    Edit Profile\n                </Link>\n            </Menu.Item>\n            <Menu.Item key='/files'>\n                <Link to='/files'>\n                    <FileOutlined />\n                    Files\n                </Link>\n            </Menu.Item>\n            <Menu.Divider />\n            <Menu.Item danger={true} key='3' onClick={logOut}>\n                <LogoutOutlined />\n                Logout\n            </Menu.Item>\n        </Menu>\n    );\n\n    return (\n        <>\n            <h1>{title}</h1>\n            <div>\n                <Switch checked={theme} onChange={onChangeTheme} />\n                {user ? (\n                    <Dropdown overlay={menu} trigger={[\"click\"]}>\n                        <Button onClick={(e) => e.preventDefault()}>\n                            {user.username}\n                            <DownOutlined />\n                        </Button>\n                    </Dropdown>\n                ) : (\n                    <>\n                        <Link to='/login'>Sign in</Link> |\n                        <Link to='/register'>Sign up</Link>\n                    </>\n                )}\n            </div>\n        </>\n    );\n};\n\nexport default Header;\n","import React from \"react\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { Menu } from \"antd\";\n\nconst Sider = (props) => {\n    const { routes } = props;\n    const history = useHistory();\n    return (\n        <Menu\n            theme={props.theme ? \"light\" : \"dark\"}\n            defaultSelectedKeys={[history.location.pathname]}\n            mode='inline'>\n            {routes &&\n                routes.map((item) => {\n                    return (\n                        <Menu.Item key={item.path}>\n                            <NavLink to={item.path}>{item.title}</NavLink>\n                        </Menu.Item>\n                    );\n                })}\n        </Menu>\n    );\n};\n\nexport default Sider;\n","import React from \"react\";\n\nimport { Row, Col, Badge } from \"antd\";\n\nconst About = (props) => {\n    let { users } = props;\n\n    return (\n        <Row gutter={16} className='items'>\n            {users\n                ? users.map((item, index) => {\n                      return (\n                          <Col span={6} className='item' key={index}>\n                              <div className='username'>\n                                  {item.username}\n                                  <Badge\n                                      status={\n                                          item.isOnline ? \"success\" : \"error\"\n                                      }\n                                  />\n                              </div>\n                              <div className='user-email'>{item.email}</div>\n                          </Col>\n                      );\n                  })\n                : \"Users not found\"}\n        </Row>\n    );\n};\n\nexport default About;\n","import React from \"react\";\n\nconst Home = () => {\n    // throw Error(\"error!\");\n    return <div>home</div>;\n};\n\nexport default Home;\n","export const validateMessages = {\n    required: '${label} is required!',\n    types: {\n        email: \"${label} is not a valid email!\",\n        number: \"${label} is not a valid number!\",\n        regexp:\n            \"${label} must including uppercase, lowercase letters and numbers\",\n    },\n    number: {\n        range: \"${label} must be between ${min} and ${max}\",\n    },\n    string: {\n        min: \"${label} must be at least ${min} characters\",\n        max: \"${label} cannot be longer than ${max} characters\",\n    },\n    pattern: {\n        mismatch:\n            \"${label} must including letters and numbers.\",\n    },\n};","import React, { useState } from \"react\";\nimport { Form, Input } from \"antd\";\n\nfunction FormInput(props) {\n    const [inputLabel] = useState(props.label);\n    const [inputType] = useState(props.type);\n    const [inputName] = useState(props.name);\n    const [inputRules] = useState(props.rules);\n    const [inputValue, setInputValue] = useState(props.value);\n\n    return (\n        <>\n            <Form.Item\n                label={inputLabel}\n                name={inputName}\n                initialValue={inputValue}\n                value={inputValue}\n                rules={inputRules}\n                onChange={props.onChange}>\n                <Input name={inputName} type={inputType} />\n            </Form.Item>\n        </>\n    );\n}\nexport default FormInput;\n","import axios from \"axios\";\nimport { message } from \"antd\";\n\nexport const usePost = (query) => {\n    const response = async ({ variables }) => {\n        const route = `http://localhost:8000/api/${query}`;\n        const response = await axios.post(route, variables);\n        try {\n            if (response.data.error) {\n                message.error(response.data.error);\n            } else if (response.data) {\n                return response.data;\n            }\n        } catch (error) {\n            message.error(\"Something went wrong\");\n            console.log(error);\n        }\n    };\n\n    return response;\n};\n","import React, { useState, useEffect } from \"react\";\nimport {\n    Row,\n    Col,\n    Card,\n    Spin,\n    Avatar,\n    Typography,\n    Form,\n    Button,\n    message,\n} from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { useQuery } from \"../hooks/useQuery\";\nimport { validateMessages } from \"../constants/validateMessages\";\nimport FormInput from \"../components/reusable/FormInput\";\nimport { usePost } from \"../hooks/usePost\";\n\nconst Profile = () => {\n    const { data, loading, refetch } = useQuery(\"user\");\n    const [formData, setFormData] = useState({\n        currentPassword: \"\",\n        newPassword: \"\",\n    });\n\n    const postData = usePost(\"updateUser\");\n\n    useEffect(() => {\n        setFormData({ ...data, ...formData });\n    }, [data]);\n\n    const OnFinish = async () => {\n        //update user\n        const response = await postData({ variables: { ...formData } });\n        if (response) {\n            refetch();\n            message.success(response.message);\n        }\n    };\n\n    const onChangeField = (e) => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    if (loading) {\n        return <Spin />;\n    }\n    console.log(formData);\n    return data ? (\n        <Row gutter={16}>\n            <Col span={8}>\n                <Card className='card-user'>\n                    <Avatar size={100} icon={<UserOutlined />} />\n                    <Typography.Title level={2}>\n                        {data.username}\n                    </Typography.Title>\n                </Card>\n            </Col>\n            <Col span={16}>\n                <Card title='Account Details'>\n                    <Form\n                        layout='vertical'\n                        onFinish={OnFinish}\n                        validateMessages={validateMessages}>\n                        <Row gutter={16}>\n                            <Col span={12}>\n                                <FormInput\n                                    label='Name'\n                                    type='text'\n                                    name='username'\n                                    value={formData.username}\n                                    onChange={onChangeField}\n                                    rules={[{ required: true }]}\n                                />\n                            </Col>\n                            <Col span={12}>\n                                <FormInput\n                                    label='Email'\n                                    type='email'\n                                    name='email'\n                                    value={formData.email}\n                                    onChange={onChangeField}\n                                    rules={[{ required: true, type: \"email\" }]}\n                                />\n                            </Col>\n                            <Col span={12}>\n                                <FormInput\n                                    label='New Password'\n                                    type='password'\n                                    name='newPassword'\n                                    value={formData.newPassword}\n                                    onChange={onChangeField}\n                                />\n                            </Col>\n                            <Col span={12}>\n                                <FormInput\n                                    label='Current Password'\n                                    type='password'\n                                    name='currentPassword'\n                                    value={formData.currentPassword}\n                                    onChange={onChangeField}\n                                />\n                            </Col>\n                        </Row>\n                        <Button type='primary' htmlType='submit'>\n                            Update Account\n                        </Button>\n                    </Form>\n                </Card>\n            </Col>\n        </Row>\n    ) : null;\n};\n\nexport default Profile;\n","import axios from \"axios\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport { message } from \"antd\";\n\nexport const useQuery = (query) => {\n    const [data, setDate] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const fetch = useCallback(() => {\n        const fetchApi = async () => {\n            setLoading(true);\n            const route = `http://localhost:8000/api/${query}`;\n            const response = await axios.get(route);\n            try {\n                if (response.data.error) {\n                    message.error(response.data.error);\n                } else if (response.data) {\n                    setDate(response.data);\n                }\n            } catch (error) {\n                message.error(\"Something went wrong\");\n                console.log(error);\n            }\n            setLoading(false);\n        };\n\n        fetchApi();\n    }, [query]);\n\n    useEffect(() => {\n        fetch();\n    }, [fetch]);\n\n    return { data, loading, refetch: fetch };\n};\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Input, Button } from \"antd\";\nimport { usePost } from \"../hooks/usePost\";\nimport { validateMessages } from \"../constants/validateMessages\";\nimport { message } from \"antd\";\n\nconst SignUp = () => {\n    let history = useHistory();\n    const [user, setUser] = useState({\n        username: null,\n        email: null,\n        password: null,\n    });\n\n    const postData = usePost(\"register\");\n\n    const OnFinish = async () => {\n        const response = await postData({\n            variables: {\n                ...user,\n            },\n        });\n        if (response) {\n            message.success(\"User was created\");\n            localStorage.setItem(\"token\", response.token);\n            history.push(\"/\");\n        }\n    };\n\n    const onChangeField = (e) => {\n        setUser({\n            ...user,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    return (\n        <Form\n            onFinish={OnFinish}\n            layout='vertical'\n            validateMessages={validateMessages}>\n            <Form.Item\n                label='Username'\n                name='username'\n                value={user.username}\n                onChange={onChangeField}\n                rules={[{ required: true }]}>\n                <Input name='username' />\n            </Form.Item>\n\n            <Form.Item\n                label='Email'\n                name='email'\n                value={user.email}\n                onChange={onChangeField}\n                rules={[{ required: true, type: \"email\" }]}>\n                <Input name='email' />\n            </Form.Item>\n\n            <Form.Item\n                label='Password'\n                name='password'\n                value={user.password}\n                onChange={onChangeField}\n                rules={[\n                    {\n                        required: true,\n                        min: 8,\n                    },\n                    {\n                        pattern: /(?=.*\\d)(?=.*[a-z])/,\n                    },\n                ]}>\n                <Input.Password name='password' />\n            </Form.Item>\n\n            <Form.Item>\n                <Button type='primary' htmlType='submit'>\n                    Submit\n                </Button>\n            </Form.Item>\n        </Form>\n    );\n};\n\nexport default SignUp;\n","import React, { useState } from \"react\";\nimport { Form, Input, Button } from \"antd\";\nimport { usePost } from \"../hooks/usePost\";\nimport { validateMessages } from \"../constants/validateMessages\";\nimport { useHistory } from \"react-router-dom\";\n\nconst SignIn = () => {\n    const history = useHistory();\n    const [user, setUser] = useState({\n        email: null,\n        password: null,\n    });\n\n    const postData = usePost(\"login\");\n\n    const OnFinish = async () => {\n        const response = await postData({\n            variables: {\n                ...user,\n            },\n        });\n        if (response) {\n            localStorage.setItem(\"token\", response.token);\n            history.push(\"/\");\n        }\n    };\n\n    const onChangeField = (e) => {\n        setUser({\n            ...user,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    return (\n        <Form\n            onFinish={OnFinish}\n            layout='vertical'\n            validateMessages={validateMessages}>\n            <Form.Item\n                label='Email'\n                name='email'\n                value={user.email}\n                onChange={onChangeField}\n                rules={[{ required: true, type: \"email\" }]}>\n                <Input name='email' />\n            </Form.Item>\n\n            <Form.Item\n                label='Password'\n                name='password'\n                value={user.password}\n                onChange={onChangeField}\n                rules={[\n                    {\n                        required: true,\n                        message: \"Please input your password!\",\n                    },\n                ]}>\n                <Input.Password name='password' />\n            </Form.Item>\n\n            <Form.Item>\n                <Button type='primary' htmlType='submit'>\n                    Submit\n                </Button>\n            </Form.Item>\n        </Form>\n    );\n};\n\nexport default SignIn;\n","import { useEffect } from \"react\";\n\nexport const Page = (props) => {\n    const { title, setTitle } = props;\n    useEffect(() => {\n        setTitle(title);\n        document.title = title;\n    }, [title, setTitle]);\n    return props.children;\n};\n","const user = (state = {}, action) => {\n    switch (action.type) {\n        case \"ADD_CURRENT_USER\":\n            const { id, username, email, password } = action.payload;\n            return {\n                id,\n                username,\n                email,\n                password,\n            };\n        default:\n            return state;\n    }\n};\n\nexport default user;\n","import { combineReducers } from \"redux\";\nimport user from \"./user\";\n\nexport default combineReducers({\n    user,\n});\n","import React from \"react\";\n\nconst ErrorComponent = () => {\n    return <h1>Something went wrong</h1>;\n};\n\nexport default class ErrorBoundary extends React.Component {\n    state = {\n        hasError: false,\n        error: { message: \"\", stack: \"\" },\n        info: { componentStack: \"\" },\n    };\n\n    static getDerivedStateFromError(error) {\n        // Обновить состояние с тем, чтобы следующий рендер показал запасной UI.\n        return { hasError: true };\n    }\n\n    componentDidCatch(error, info) {\n        this.setState({ error, info });\n    }\n\n    render() {\n        const { hasError } = this.state;\n        const { children } = this.props;\n        return hasError ? <ErrorComponent /> : children;\n    }\n}\n","import React, { useEffect } from \"react\";\nimport { Route, useHistory } from \"react-router-dom\";\nimport { Page } from \"../components/Page\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport axios from \"axios\";\n\nexport const PrivateRoute = ({ component, ...rest }) => {\n    const history = useHistory();\n    useEffect(() => {\n        async function verifyToken() {\n            try {\n                await axios.get(\"http://localhost:8000/api/verifyToken\", {\n                    token: localStorage.getItem(\"token\"),\n                });\n            } catch (error) {\n                history.push(\"/login\");\n            }\n        }\n        verifyToken();\n    }, [history]);\n\n    return (\n        <Route\n            {...rest}\n            render={(props) => (\n                <ErrorBoundary>\n                    <Page\n                        setTitle={rest.setTitle}\n                        title={rest.title}\n                        {...props}>\n                        {component}\n                    </Page>{\" \"}\n                </ErrorBoundary>\n            )}\n        />\n    );\n};\n","import { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\n\nimport { useBeforeUnload } from \"./useBeforeUnload\";\n\nconst SERVER_URL = \"http://localhost:8000/\";\n\nexport const useChat = (roomId) => {\n    const [users, setUsers] = useState([]);\n    const [user, setUser] = useState(null);\n\n    const socketRef = useRef(null);\n    const token = localStorage.getItem(\"token\");\n\n    useEffect(() => {\n        async function fetchData() {\n            if (token) {\n                const response = await axios.get(\n                    \"http://localhost:8000/api/user\"\n                );\n                if (response.data) {\n                    setUser(response.data);\n                    localStorage.setItem(\"userId\", response.data.id);\n                }\n            }\n        }\n        fetchData();\n    }, [token]);\n\n    useEffect(() => {\n        if (user) {\n            socketRef.current = io(SERVER_URL, {\n                transports: [\"websocket\"],\n                query: { roomId },\n                auth: {\n                    token: token,\n                },\n            });\n\n            let userId = user && user.id;\n\n            if (userId && token) {\n                socketRef.current.emit(\"user:add\", userId);\n                socketRef.current.on(\"users\", (users) => {\n                    setUsers(users);\n                });\n                return () => {\n                    socketRef.current.disconnect(userId);\n                    socketRef.current.emit(\"user:leave\", userId);\n                };\n            } else if (!token) {\n                socketRef.current.emit(\"user:leave\", userId);\n                return () => {\n                    socketRef.current.disconnect(userId);\n                };\n            }\n        }\n    }, [roomId, user, token]);\n\n    useBeforeUnload(() => {\n        socketRef.current.emit(\"user:leave\", localStorage.getItem(\"userId\"));\n    });\n\n    return { users };\n};\n","import { useEffect } from \"react\";\n\nexport const useBeforeUnload = (value) => {\n    const handleBeforeunload = (e) => {\n        let returnValue;\n        if (typeof value === \"function\") {\n            returnValue = value(e);\n        } else {\n            returnValue = value;\n        }\n        if (returnValue) {\n            e.preventDefault();\n            e.returnValue = returnValue;\n        }\n\n        return returnValue;\n    };\n\n    useEffect(() => {\n        window.addEventListener(\"beforeunload\", handleBeforeunload);\n        return () => {\n            window.removeEventListener(\"beforeunload\", handleBeforeunload);\n        };\n\n        // eslint-disable-next-line\n    }, []);\n};\n","import React, { useState } from \"react\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Layout } from \"antd\";\n\nimport Header from \"./components/Header\";\nimport Sider from \"./components/Sider\";\n\nimport About from \"./pages/About\";\nimport Home from \"./pages/Home\";\nimport Profile from \"./pages/Profile\";\nimport SignUp from \"./pages/SignUp\";\nimport SignIn from \"./pages/SignIn\";\nimport { Page } from \"./components/Page\";\n\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport rootReducer from \"./reducers\";\nimport ErrorBoundary from \"./utils/ErrorBoundary\";\nimport { PrivateRoute } from \"./utils/PrivateRoute\";\n\nimport { useChat } from \"./hooks/useChat\";\n\nconst store = createStore(rootReducer, composeWithDevTools());\n\n// store.subscribe();\nconst App = () => {\n    const [title, setTitle] = useState(\"\");\n    const [theme, setTheme] = useState(true);\n    const { users } = useChat(\"room\");\n\n    const onChangeTheme = () => {\n        setTheme(!theme);\n    };\n    const dinamicRoutes = [\n        {\n            component: <Home />,\n            path: \"/\",\n            title: \"Home\",\n            exact: true,\n        },\n        {\n            component: <Profile />,\n            path: \"/profile\",\n            title: \"Profile\",\n        },\n        {\n            component: <About users={users} />,\n            path: \"/about\",\n            title: \"About\",\n        },\n    ];\n    const staticRoutes = [\n        {\n            component: <SignUp />,\n            path: \"/register\",\n            title: \"Sign up\",\n        },\n        {\n            component: <SignIn />,\n            path: \"/login\",\n            title: \"Sign in\",\n        },\n    ];\n\n    axios.interceptors.request.use(function (config) {\n        const token = localStorage.getItem(\"token\");\n        config.headers.Authorization = `Bearer ${token}`;\n        return config;\n    });\n\n    return (\n        <Provider store={store}>\n            <Router>\n                <Layout className={theme ? \"light\" : \"dark\"}>\n                    <Layout.Sider breakpoint='xxl'>\n                        <Sider theme={theme} routes={dinamicRoutes} />\n                    </Layout.Sider>\n                    <Layout className={theme ? \"light\" : \"dark\"}>\n                        <Layout.Header>\n                            <Header\n                                title={title}\n                                theme={theme}\n                                onChangeTheme={onChangeTheme}\n                            />\n                        </Layout.Header>\n\n                        <Layout.Content>\n                            <Switch>\n                                {staticRoutes.map((item, index) => {\n                                    return (\n                                        <Route\n                                            key={index}\n                                            path={item.path}\n                                            title={item.title}\n                                            exact={item.exact}>\n                                            <ErrorBoundary>\n                                                <Page\n                                                    setTitle={setTitle}\n                                                    title={item.title}>\n                                                    {item.component}\n                                                </Page>\n                                            </ErrorBoundary>\n                                        </Route>\n                                    );\n                                })}\n                                {dinamicRoutes.map((item, index) => {\n                                    return (\n                                        <PrivateRoute\n                                            key={index}\n                                            path={item.path}\n                                            title={item.title}\n                                            exact={item.exact}\n                                            setTitle={setTitle}\n                                            component={item.component}\n                                        />\n                                    );\n                                })}\n                            </Switch>\n                        </Layout.Content>\n                        <Layout.Footer>Footer</Layout.Footer>\n                    </Layout>\n                </Layout>\n            </Router>\n        </Provider>\n    );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"antd/dist/antd.css\";\nimport \"./web/css/style.scss\";\n\nReactDOM.render(\n    // <React.StrictMode> //return error after validation antd form \n    <App />,\n    // </React.StrictMode>\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}
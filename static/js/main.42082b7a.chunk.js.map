{"version":3,"sources":["components/Header.js","components/Sider.js","pages/About.js","pages/Home.js","pages/Profile.js","hooks/usePost.js","constants/validateMessages.js","pages/SignUp.js","pages/SignIn.js","components/Page.js","reducers/user.js","reducers/index.js","utils/ErrorBoundary.js","utils/PrivateRoute.js","hooks/useChat.js","hooks/useBeforeUnload.js","App.js","index.js"],"names":["Header","props","history","useHistory","title","theme","onChangeTheme","useState","user","setUser","token","localStorage","getItem","useEffect","a","axios","get","response","data","fetchData","menu","Item","to","UserOutlined","EditOutlined","FileOutlined","Divider","danger","onClick","removeItem","push","LogoutOutlined","checked","onChange","overlay","trigger","e","preventDefault","username","DownOutlined","Sider","routes","defaultSelectedKeys","location","pathname","mode","map","item","path","About","users","gutter","className","index","span","status","isOnline","email","Home","Profile","usePost","url","variables","route","post","error","message","console","log","validateMessages","required","types","number","regexp","range","string","min","max","pattern","mismatch","SignUp","password","postData","OnFinish","success","setItem","onChangeField","target","name","value","onFinish","layout","label","rules","type","Password","htmlType","SignIn","Page","setTitle","document","children","state","action","payload","id","combineReducers","ErrorComponent","ErrorBoundary","hasError","stack","info","componentStack","this","setState","React","Component","PrivateRoute","component","rest","verifyToken","render","useChat","roomId","setUsers","socketRef","useRef","current","io","transports","query","auth","userId","emit","on","disconnect","handleBeforeunload","returnValue","window","addEventListener","removeEventListener","useBeforeUnload","store","createStore","rootReducer","composeWithDevTools","App","setTheme","dinamicRoutes","exact","staticRoutes","interceptors","request","use","config","headers","Authorization","breakpoint","Content","Footer","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.42082b7a.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Dropdown, Menu, Switch, Button } from \"antd\";\nimport axios from \"axios\";\nimport {\n    DownOutlined,\n    UserOutlined,\n    EditOutlined,\n    FileOutlined,\n    LogoutOutlined,\n} from \"@ant-design/icons\";\n\nconst Header = (props) => {\n    const history = useHistory();\n    const { title, theme, onChangeTheme } = props;\n    const [user, setUser] = useState(null);\n\n    const logOut = () => {\n        localStorage.removeItem(\"token\");\n        setUser(null);\n        history.push(\"/login\");\n    };\n\n    const token = localStorage.getItem(\"token\");\n    useEffect(() => {\n        async function fetchData() {\n            if (token) {\n                const response = await axios.get(\n                    \"http://localhost:8000/api/user\"\n                );\n                if (response.data) {\n                    setUser({\n                        ...response.data,\n                    });\n                }\n            }\n        }\n        fetchData();\n    }, [token]);\n\n    const menu = (\n        <Menu>\n            <Menu.Item key='/profile'>\n                <Link to='/profile'>\n                    <UserOutlined />\n                    Profile\n                </Link>\n            </Menu.Item>\n            <Menu.Item key='/edit-profile'>\n                <Link to='/edit-profile'>\n                    <EditOutlined />\n                    Edit Profile\n                </Link>\n            </Menu.Item>\n            <Menu.Item key='/files'>\n                <Link to='/files'>\n                    <FileOutlined />\n                    Files\n                </Link>\n            </Menu.Item>\n            <Menu.Divider />\n            <Menu.Item danger={true} key='3' onClick={logOut}>\n                <LogoutOutlined />\n                Logout\n            </Menu.Item>\n        </Menu>\n    );\n\n    return (\n        <>\n            <h1>{title}</h1>\n            <div>\n                <Switch checked={theme} onChange={onChangeTheme} />\n                {user ? (\n                    <Dropdown overlay={menu} trigger={[\"click\"]}>\n                        <Button onClick={(e) => e.preventDefault()}>\n                            {user.username}\n                            <DownOutlined />\n                        </Button>\n                    </Dropdown>\n                ) : (\n                    <>\n                        <Link to='/login'>Sign in</Link> |\n                        <Link to='/register'>Sign up</Link>\n                    </>\n                )}\n            </div>\n        </>\n    );\n};\n\nexport default Header;\n","import React from \"react\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { Menu } from \"antd\";\n\nconst Sider = (props) => {\n    const { routes } = props;\n    const history = useHistory();\n    return (\n        <Menu\n            theme={props.theme ? \"light\" : \"dark\"}\n            defaultSelectedKeys={[history.location.pathname]}\n            mode='inline'>\n            {routes &&\n                routes.map((item) => {\n                    return (\n                        <Menu.Item key={item.path}>\n                            <NavLink to={item.path}>{item.title}</NavLink>\n                        </Menu.Item>\n                    );\n                })}\n        </Menu>\n    );\n};\n\nexport default Sider;\n","import React from \"react\";\n\nimport { Row, Col, Badge } from \"antd\";\n\nconst About = (props) => {\n    let { users } = props;\n\n    return (\n        <Row gutter={16} className='items'>\n            {users\n                ? users.map((item, index) => {\n                      return (\n                          <Col span={6} className='item' key={index}>\n                              <div className='username'>\n                                  {item.username}\n                                  <Badge\n                                      status={\n                                          item.isOnline ? \"success\" : \"error\"\n                                      }\n                                  />\n                              </div>\n                              <div className='user-email'>{item.email}</div>\n                          </Col>\n                      );\n                  })\n                : \"Users not found\"}\n        </Row>\n    );\n};\n\nexport default About;\n","import React from \"react\";\n\nconst Home = () => {\n    // throw Error(\"error!\");\n    return <div>home</div>;\n};\n\nexport default Home;\n","import React from \"react\";\n\nconst Profile = () => {\n    return <div>profile</div>;\n};\n\nexport default Profile;","import axios from \"axios\";\nimport { message } from \"antd\";\n\nexport const usePost = (url) => {\n    const response = async ({ variables }) => {\n        const route = `http://localhost:8000/api/${url}`;\n        const response = await axios.post(route, variables);\n        try {\n            if (response.data.error) {\n                message.error(response.data.error);\n            } else if (response.data) {\n                return response.data;\n            }\n        } catch (error) {\n            message.error(\"Something went wrong\");\n            console.log(error);\n        }\n    };\n\n    return response;\n};\n","export const validateMessages = {\n    required: '${label} is required!',\n    types: {\n        email: \"${label} is not a valid email!\",\n        number: \"${label} is not a valid number!\",\n        regexp:\n            \"${label} must including uppercase, lowercase letters and numbers\",\n    },\n    number: {\n        range: \"${label} must be between ${min} and ${max}\",\n    },\n    string: {\n        min: \"${label} must be at least ${min} characters\",\n        max: \"${label} cannot be longer than ${max} characters\",\n    },\n    pattern: {\n        mismatch:\n            \"${label} must including letters and numbers.\",\n    },\n};","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Input, Button } from \"antd\";\nimport { usePost } from \"../hooks/usePost\";\nimport { validateMessages } from \"../constants/validateMessages\";\nimport { message } from \"antd\";\n\nconst SignUp = () => {\n    let history = useHistory();\n    const [user, setUser] = useState({\n        username: null,\n        email: null,\n        password: null,\n    });\n\n    const postData = usePost(\"register\");\n\n    const OnFinish = async () => {\n        const response = await postData({\n            variables: {\n                ...user,\n            },\n        });\n        if (response) {\n            message.success(\"User was created\");\n            localStorage.setItem(\"token\", response.token);\n            history.push(\"/\");\n        }\n    };\n\n    const onChangeField = (e) => {\n        setUser({\n            ...user,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    return (\n        <Form\n            onFinish={OnFinish}\n            layout='vertical'\n            validateMessages={validateMessages}>\n            <Form.Item\n                label='Username'\n                name='username'\n                value={user.username}\n                onChange={onChangeField}\n                rules={[{ required: true }]}>\n                <Input name='username' />\n            </Form.Item>\n\n            <Form.Item\n                label='Email'\n                name='email'\n                value={user.email}\n                onChange={onChangeField}\n                rules={[{ required: true, type: \"email\" }]}>\n                <Input name='email' />\n            </Form.Item>\n\n            <Form.Item\n                label='Password'\n                name='password'\n                value={user.password}\n                onChange={onChangeField}\n                rules={[\n                    {\n                        required: true,\n                        min: 8,\n                    },\n                    {\n                        pattern: /(?=.*\\d)(?=.*[a-z])/,\n                    },\n                ]}>\n                <Input.Password name='password' />\n            </Form.Item>\n\n            <Form.Item>\n                <Button type='primary' htmlType='submit'>\n                    Submit\n                </Button>\n            </Form.Item>\n        </Form>\n    );\n};\n\nexport default SignUp;\n","import React, { useState } from \"react\";\nimport { Form, Input, Button } from \"antd\";\nimport { usePost } from \"../hooks/usePost\";\nimport { validateMessages } from \"../constants/validateMessages\";\nimport { useHistory } from \"react-router-dom\";\n\nconst SignIn = () => {\n    const history = useHistory();\n    const [user, setUser] = useState({\n        email: null,\n        password: null,\n    });\n\n    const postData = usePost(\"login\");\n\n    const OnFinish = async () => {\n        const response = await postData({\n            variables: {\n                ...user,\n            },\n        });\n        if (response) {\n            localStorage.setItem(\"token\", response.token);\n            history.push(\"/\");\n        }\n    };\n\n    const onChangeField = (e) => {\n        setUser({\n            ...user,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    return (\n        <Form\n            onFinish={OnFinish}\n            layout='vertical'\n            validateMessages={validateMessages}>\n            <Form.Item\n                label='Email'\n                name='email'\n                value={user.email}\n                onChange={onChangeField}\n                rules={[{ required: true, type: \"email\" }]}>\n                <Input name='email' />\n            </Form.Item>\n\n            <Form.Item\n                label='Password'\n                name='password'\n                value={user.password}\n                onChange={onChangeField}\n                rules={[\n                    {\n                        required: true,\n                        message: \"Please input your password!\",\n                    },\n                ]}>\n                <Input.Password name='password' />\n            </Form.Item>\n\n            <Form.Item>\n                <Button type='primary' htmlType='submit'>\n                    Submit\n                </Button>\n            </Form.Item>\n        </Form>\n    );\n};\n\nexport default SignIn;\n","import { useEffect } from \"react\";\n\nexport const Page = (props) => {\n    const { title, setTitle } = props;\n    useEffect(() => {\n        setTitle(title);\n        document.title = title;\n    }, [title, setTitle]);\n    return props.children;\n};\n","const user = (state = {}, action) => {\n    switch (action.type) {\n        case \"ADD_CURRENT_USER\":\n            const { id, username, email, password } = action.payload;\n            return {\n                id,\n                username,\n                email,\n                password,\n            };\n        default:\n            return state;\n    }\n};\n\nexport default user;\n","import { combineReducers } from \"redux\";\nimport user from \"./user\";\n\nexport default combineReducers({\n    user,\n});\n","import React from \"react\";\n\nconst ErrorComponent = () => {\n    return <h1>Something went wrong</h1>;\n};\n\nexport default class ErrorBoundary extends React.Component {\n    state = {\n        hasError: false,\n        error: { message: \"\", stack: \"\" },\n        info: { componentStack: \"\" },\n    };\n\n    static getDerivedStateFromError(error) {\n        // Обновить состояние с тем, чтобы следующий рендер показал запасной UI.\n        return { hasError: true };\n    }\n\n    componentDidCatch(error, info) {\n        this.setState({ error, info });\n        // Можно также сохранить информацию об ошибке в соответствующую службу журнала ошибок\n        // logErrorToMyService(error, errorInfo);\n    }\n\n    render() {\n        const { hasError } = this.state;\n        const { children } = this.props;\n        return hasError ? <ErrorComponent /> : children;\n    }\n}\n","import React, { useEffect } from \"react\";\nimport { Route, useHistory } from \"react-router-dom\";\nimport { Page } from \"../components/Page\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport axios from \"axios\";\n\nexport const PrivateRoute = ({ component, ...rest }) => {\n    const history = useHistory();\n    useEffect(() => {\n        async function verifyToken() {\n            try {\n                await axios.get(\"http://localhost:8000/api/verifyToken\", {\n                    token: localStorage.getItem(\"token\"),\n                });\n            } catch (error) {\n                history.push(\"/login\");\n            }\n        }\n        verifyToken();\n    }, [history]);\n\n    return (\n        <Route\n            {...rest}\n            render={(props) => (\n                <ErrorBoundary>\n                    <Page\n                        setTitle={rest.setTitle}\n                        title={rest.title}\n                        {...props}>\n                        {component}\n                    </Page>{\" \"}\n                </ErrorBoundary>\n            )}\n        />\n    );\n};\n","import { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\n\nimport { useBeforeUnload } from \"./useBeforeUnload\";\n\nconst SERVER_URL = \"http://localhost:8000/\";\n\nexport const useChat = (roomId) => {\n    const [users, setUsers] = useState([]);\n    const [user, setUser] = useState(null);\n\n    const socketRef = useRef(null);\n    const token = localStorage.getItem(\"token\");\n\n    useEffect(() => {\n        async function fetchData() {\n            if (token) {\n                const response = await axios.get(\n                    \"http://localhost:8000/api/user\"\n                );\n                if (response.data) {\n                    setUser(response.data);\n                    localStorage.setItem(\"userId\", response.data.id);\n                }\n            }\n        }\n        fetchData();\n    }, [token]);\n\n    useEffect(() => {\n        if (user) {\n            socketRef.current = io(SERVER_URL, {\n                transports: [\"websocket\"],\n                query: { roomId },\n                auth: {\n                    token: token,\n                },\n            });\n\n            let userId = user && user.id;\n\n            if (userId && token) {\n                socketRef.current.emit(\"user:add\", userId);\n                socketRef.current.on(\"users\", (users) => {\n                    setUsers(users);\n                });\n                return () => {\n                    socketRef.current.disconnect(userId);\n                    socketRef.current.emit(\"user:leave\", userId);\n                };\n            } else if (!token) {\n                socketRef.current.emit(\"user:leave\", userId);\n                return () => {\n                    socketRef.current.disconnect(userId);\n                };\n            }\n        }\n    }, [roomId, user, token]);\n\n    useBeforeUnload(() => {\n        socketRef.current.emit(\"user:leave\", localStorage.getItem(\"userId\"));\n    });\n\n    return { users };\n};\n","import { useEffect } from \"react\";\n\nexport const useBeforeUnload = (value) => {\n    const handleBeforeunload = (e) => {\n        let returnValue;\n        if (typeof value === \"function\") {\n            returnValue = value(e);\n        } else {\n            returnValue = value;\n        }\n        if (returnValue) {\n            e.preventDefault();\n            e.returnValue = returnValue;\n        }\n\n        return returnValue;\n    };\n\n    useEffect(() => {\n        window.addEventListener(\"beforeunload\", handleBeforeunload);\n        return () => {\n            window.removeEventListener(\"beforeunload\", handleBeforeunload);\n        };\n\n        // eslint-disable-next-line\n    }, []);\n};\n","import React, { useState } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Layout } from \"antd\";\n\nimport Header from \"./components/Header\";\nimport Sider from \"./components/Sider\";\n\nimport About from \"./pages/About\";\nimport Home from \"./pages/Home\";\nimport Profile from \"./pages/Profile\";\nimport SignUp from \"./pages/SignUp\";\nimport SignIn from \"./pages/SignIn\";\nimport { Page } from \"./components/Page\";\n\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport rootReducer from \"./reducers\";\nimport ErrorBoundary from \"./utils/ErrorBoundary\";\nimport { PrivateRoute } from \"./utils/PrivateRoute\";\n\nimport { useChat } from \"./hooks/useChat\";\n\nconst store = createStore(rootReducer, composeWithDevTools());\n\n// store.subscribe();\nconst App = () => {\n    const [title, setTitle] = useState(\"\");\n    const [theme, setTheme] = useState(true);\n    const { users } = useChat(\"room\");\n\n    const onChangeTheme = () => {\n        setTheme(!theme);\n    };\n    const dinamicRoutes = [\n        {\n            component: <Home />,\n            path: \"/\",\n            title: \"Home\",\n            exact: true,\n        },\n        {\n            component: <Profile />,\n            path: \"/profile\",\n            title: \"Profile\",\n        },\n        {\n            component: <About users={users} />,\n            path: \"/about\",\n            title: \"About\",\n        },\n    ];\n    const staticRoutes = [\n        {\n            component: <SignUp />,\n            path: \"/register\",\n            title: \"Sign up\",\n        },\n        {\n            component: <SignIn />,\n            path: \"/login\",\n            title: \"Sign in\",\n        },\n    ];\n\n    axios.interceptors.request.use(function (config) {\n        const token = localStorage.getItem(\"token\");\n        config.headers.Authorization = `Bearer ${token}`;\n        return config;\n    });\n\n    return (\n        <Provider store={store}>\n            <Router>\n                <Layout className={theme ? \"light\" : \"dark\"}>\n                    <Layout.Sider breakpoint='xxl'>\n                        <Sider theme={theme} routes={dinamicRoutes} />\n                    </Layout.Sider>\n                    <Layout className={theme ? \"light\" : \"dark\"}>\n                        <Layout.Header>\n                            <Header\n                                title={title}\n                                theme={theme}\n                                onChangeTheme={onChangeTheme}\n                            />\n                        </Layout.Header>\n\n                        <Layout.Content>\n                            <Switch>\n                                {staticRoutes.map((item, index) => {\n                                    return (\n                                        <Route\n                                            key={index}\n                                            path={item.path}\n                                            title={item.title}\n                                            exact={item.exact}>\n                                            <ErrorBoundary>\n                                                <Page\n                                                    setTitle={setTitle}\n                                                    title={item.title}>\n                                                    {item.component}\n                                                </Page>\n                                            </ErrorBoundary>\n                                        </Route>\n                                    );\n                                })}\n                                {dinamicRoutes.map((item, index) => {\n                                    return (\n                                        <PrivateRoute\n                                            key={index}\n                                            path={item.path}\n                                            title={item.title}\n                                            exact={item.exact}\n                                            setTitle={setTitle}\n                                            component={item.component}\n                                        />\n                                    );\n                                })}\n                            </Switch>\n                        </Layout.Content>\n                        <Layout.Footer>Footer</Layout.Footer>\n                    </Layout>\n                </Layout>\n            </Router>\n        </Provider>\n    );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"antd/dist/antd.css\";\nimport \"./style.scss\";\n\nReactDOM.render(\n    // <React.StrictMode>\n    <App />,\n    // </React.StrictMode>\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}